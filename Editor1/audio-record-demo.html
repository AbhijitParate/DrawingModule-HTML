<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Audio-record Example - Record Plugin for Video.js</title>

    <link href="//vjs.zencdn.net/5.9.2/video-js.min.css" rel="stylesheet">
    <link href="css/videojs.record.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/controls.css">

    <!--jQuery-->
    <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js"></script>

    <script src="//vjs.zencdn.net/5.9.2/video.min.js"></script>
    <script src="https://cdn.WebRTC-Experiment.com/RecordRTC.js"></script>
    <script src="jsideojs.record.js"></script>
    <script src="jsavesurfer.js"> </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/1.0.52/wavesurfer.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/1.1.2/plugin/wavesurfer.microphone.min.js"></script>
    <script src="//collab-project.github.io/videojs-wavesurfer/dist/videojs.wavesurfer.min.js"></script>

    <script src="jsideojs.record.js"></script>

    <style>
        /* change player background color */
        #myAudio {
            background-color: #9FD6BA;
        }
    </style>

</head>
<body>

<audio id="myAudio" class="video-js vjs-default-skin"></audio>

<script>
    var player = videojs("myAudio",
            {
                controls: true,
                width: 600,
                height: 300,
                plugins: {
                    wavesurfer: {
                        src: "live",
                        waveColor: "black",
                        progressColor: "#2E732D",
                        cursorWidth: 1,
                        msDisplayMax: 20,
                        hideScrollbar: true
                    },
                    record: {
                        audio: true,
                        video: false,
                        maxLength: 20,
                        debug: true
                    }
                }
            });

    // error handling
    player.on('deviceError', function()
    {
        console.log('device error:', player.deviceErrorCode);
    });
    player.on('error', function(error)
    {
        console.log('error:', error);
    });

    // user clicked the record button and started recording
    player.on('startRecord', function()
    {
        console.log('started recording!');
    });

    // user completed recording and stream is available
    player.on('finishRecord', function()
    {
        // the blob object contains the recorded data that
        // can be downloaded by the user, stored on server etc.
        console.log('finished recording: ', player.recordedData);

        var preview = $("#output");

        preview.empty();
        preview.append(
                '<audio class="video-js vjs-default-skin previewWindow" src="'+ player.recordedData +'" controls autoplay>' +
//                '<source src='+ player.recordedData +'>' +
                '</audio>'
        );
    });
</script>

<div id="output">

</div>

</body>
</html>