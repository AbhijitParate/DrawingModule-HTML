<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Drawing Editor</title>

    <!--CSS-->
    <link rel="stylesheet" type="text/css" href="css/editor.css">
    <link rel="stylesheet" type="text/css" href="css/controls.css">
    <link rel="stylesheet" type="text/css" href="css/literallycanvas.css" >
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.0/themes/base/jquery-ui.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.0/spectrum.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/jplayer/2.9.2/skin/blue.monday/css/jplayer.blue.monday.css">

    <!--VideoJS CSS-->
    <link href="//vjs.zencdn.net/5.9.2/video-js.min.css" rel="stylesheet">
    <link href="css/videojs.record.css" rel="stylesheet">

    <!--jQuery-->
    <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js"></script>

    <!--Literally Canvas-->
    <script type="text/javascript" src="js/literallycanvas-core.js"></script>
    <!--<script type="text/javascript" src="js/dropzone.js"></script>-->
    <!--<script type="text/javascript" src="js/fileupload.js"></script>-->
    <script type="text/javascript" src="js/webcam.js"></script>
    <script src="https://parall.ax/parallax/js/jspdf.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.0/spectrum.min.js"></script>


    <!--Video Recording-->
    <script src="//vjs.zencdn.net/5.9.2/video.min.js"></script>
    <script src="https://webrtcexperiment-webrtc.netdna-ssl.com/RecordRTC.js"></script>
    <!--<script src="./js/videojs.record.js"></script>-->
    <script src="https://collab-project.github.io/videojs-record/dist/videojs.record.min.js"></script>
    <script src="js/wavesurfer.js"> </script>

    <!--Audio Recording-->
    <script src="https://collab-project.github.io/videojs-wavesurfer/dist/wavesurfer.min.js"></script>
    <script src="https://collab-project.github.io/videojs-wavesurfer/dist/wavesurfer.microphone.min.js"></script>
    <script src="https://collab-project.github.io/videojs-wavesurfer/dist/videojs.wavesurfer.min.js"></script>

    <!--BlobUtil-->
    <script src="//wzrd.in/standalone/blob-util@latest"></script>

    <!--jPlayer-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jplayer/2.9.2/jplayer/jquery.jplayer.min.js"></script>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.7.1/fabric.js"></script>

    <!--Custom JavaScript for Drawing Module Editor-->
    <script type="text/javascript" src="js/drawing-module-editor.js"></script>

</head>
<body>
    <div class="outerContainer">
        <div class="controlsContainer">
            <div class="controlGroup groupDraw" >
                <h3>Draw</h3>
                <button class="action-small" name="draw" id="pencil" title="pencil tool to draw on below canvas with default color(black).">Pencil</button>
                <button class="action-small" name="draw" id="eraser" title="eraser tool to erase contents on below canvas.">Erase</button>
                <select class="action-small" name="draw" id="shape"  title="Select different shapes to draw on canvas.">
                    <option selected>Shapes</option>
                    <option value="line" >Line</option>
                    <option value="arrow" >Arrow</option>
                    <option value="rectangle">Rectangle</option>
                    <option value="circle">Circle</option>
                    <option value="polygon">Polygon</option>
                </select>
                <button class="action-small" name="draw" id="select" title="Select a shape. Selected shape can be moved across canvas.">Select</button>
                <button class="action-small" name="draw" id="text" title="Add text to canvas for annotation">Text</button>
                <button class="action-small disabled" name="draw" id="test" title="Not available to use">TEST</button>
            </div>
            <div class="controlGroup groupSize" >
                <h3>Size</h3>
                <p style="float: right; margin-top: 5%; margin-right: 5%;">30</p>
                <input type="range" name="size" title="size" id="size" min="1" max="30" step="3" value="5"
                       style="-webkit-appearance: slider-vertical; width: 50%; height: 80% ; float: left;">
                <p style="float: right; margin-top: 100%; margin-right: 5%;">1</p>
            </div>
            <div class="controlGroup groupColor" >
                <h3>Color</h3>
                <button class="action-large" id="colorpicker" >Color Pallet</button>
                <button class="action-small" id="red" >Red</button>
                <button class="action-small" id="green" >Green</button>
                <button class="action-small" id="blue" >Blue</button>
                <button class="action-small" id="yellow" >Yellow</button>
            </div>
            <div class="controlGroup groupImage" >
                <h3>Image</h3>
                <button class="action-small disabled" id="magnify">Magnify</button>
                <button class="action-small disabled">Center</button>
                <button class="action-small disabled">Flip</button>
                <button class="action-small disabled">Crop</button>
                <button class="action-small disabled">Fit</button>
                <button class="action-small disabled">Rotate</button>
            </div>
            <div class="controlGroup groupEdit" >
                <h3>Edit</h3>
                <button class="action-small disabled" id="hide" title="Not available">Hide</button>
                <button class="action-small" id="clear" title="Clear all contents from canvas">Clear</button>
                <button class="action-small" id="undo" title="Undo previous action">Undo</button>
                <button class="action-small" id="redo" title="Redo previously undone action">Redo</button>
            </div>
            <div class="controlGroup groupUpload" >
                <h3>Upload</h3>
                <button class="action-small" id="camera" title="Capture image using web-cam.">Camera</button>
                <button class="action-small" id="upload" title="Upload image template or local file system.">Upload</button>
                <input type="file" name="imagefile" id="imagefile" accept="image/*" hidden>
            </div>
            <div class="controlGroup groupAttach" >
                <h3>Attach</h3>
                <button class="action-small" id="attachVideo" title="Select local video or capture new video and add to attachments.">Video</button>
                <button class="action-small" id="attachAudio" title="Select local audio or capture new audio and add to attachments.">Audio</button>
                <button class="action-small" id="attachFile"  title="Select local any file and add to attachments.">File</button>
                <button class="action-small" id="attachNote"  title="Select local image or capture new image and add to attachments.">Note</button>
                <button class="action-small" id="attachImage" title="Select local note/text file or create new note and add to attachments.">Image</button>
            </div>
            <div class="controlGroup groupZoom" >
                <h3>Zoom</h3>
                <p style="float: right; margin-top: 5%; margin-right: 5%;">200%</p>
                <input type="range" name="zoom" id="zoom" min="1" max="4" step="0.5" value="2" style="-webkit-appearance: slider-vertical; width: 50%; height: 80% ; float: left;" title="Zoom in and out into canvas.">
                <p style="float: right; margin-top: 70%; margin-right: 5%;">50%</p>
            </div>
            <div class="controlGroup groupPrint" >
                <h3>Print</h3>
                <button class="action-large" id="print" title="Print the contents of canvas as PDF document.">Print</button>
            </div>
        </div>
        <div class="observationsContainer">

        </div>
        <div class="editor" id="editor" >
            <!--<div class="magnifying-glass"></div>-->
            <div class="drawing-module-canvas" style="" id="canvas"></div>
        </div>
        <div class="attachmentContainer">
            <h3 style="display:inline;">Attachments:</h3>
            <button id="showAttachments" style="display:inline;" title="Shows dialog with list of attachments and their preview"> Show attachments</button>
            <input id="attachmentInput" type="file" name="files[]" multiple hidden>
        </div>
        <div class="saveContainer">
            <button class="action-wide" id="save-image" title="Print the contents of canvas as JPEG image." >SAVE</button>
            <button class="action-wide" id="reset">RESET</button>
            <p style="float: left;">Version: 1.8.3</p>
        </div>
    </div>

    <div id="dialog-upload" title="Upload Image">
        <div id="template">
            <div id="controls" style="float: left">
            <label>
                <select id="template-select" size="6" style="width: 200px">
                    <option value="template-1">Template 1</option>
                    <option value="template-2">Template 2</option>
                    <option value="template-3">Template 3</option>
                    <option value="template-4">Template 4</option>
                    <option value="template-5">Template 5</option>
                </select>
            </label>
            <input id="fileupload" type="file" name="files" style="display: -webkit-box;">
            </div>
            <div id="preview" style="display: -webkit-box;">
                <img id="preview-image" src="images/no-preview.jpg" style="width: auto; height: 400px;">
            </div>
        </div>
    </div>

    <div id="dialog-webcam" title="Capture Image">
        <div id="webcam">
            <div id="front-cam" style="width:320px; height:240px;">

            </div>
            <form>
                <input type=button id="capture" value="Take Snapshot" >
            </form>
        </div>
    </div>

    <div id="dialog-attachment" title="Attachments">
        <div id="attachments" style="float: left; overflow-y:auto; width: 200px;">

            <div id="attachments-empty" >
                <p style="text-align: center; vertical-align: middle; line-height: 100%;" > No attachments </p>
            </div>

            <div id="attachments-not-empty" >
                <ul id="attachments-list" style="padding: 0;">

                </ul>
            </div>

        </div>
        <div id="attachment-preview-container" style="display: flex; border-left: solid 1px;" >
            <span id="attachment-preview" style="width: 400px; height: 300px; align-items: center; justify-content: center; display: inline-flex">
                <p> Click item for preview </p>
            </span>
        </div>
    </div>

    <div id="dialog-attach-video" title="Video">
        <div id="video-selection" style="float: left;">
            <input id="attachmentVideo" type="file" name="videos[]" accept="video/mp4,video/x-m4v,video/*" hidden>
            <button id="upload-video" class="uploadCaptureButton" > Upload </button>
            <button id="capture-video" class="uploadCaptureButton" > Capture </button>
        </div>
        <div id="attachment-preview-video" style="display: flex;" >
            <!--<span style="width: 400px; height: 300px">-->
                <!--To capture new video using VideoJS-->
                <!--<video id="capture-video-preview" class="video-js vjs-default-skin previewWindow"> </video>-->
                <div id="capture-video-preview" class="previewWindow">

                </div>
                <!--To play selected video using upload button-->
                <video id="uploaded-video-preview" class="video-js vjs-default-skin previewWindow" controls autoplay>
                    <source id="uploaded-video-source" src="">
                </video>
            <!--</span>-->
        </div>
    </div>

    <div id="dialog-attach-audio" title="Audio">
        <div id="audio-selection" style="float: left;">
            <input id="attachmentAudio" type="file" name="audios[]" accept="audio/*" hidden>
            <button id="upload-audio" value="hide" class="uploadCaptureButton" > Upload </button>
            <button id="capture-audio"  value="show" class="uploadCaptureButton" > Capture </button>
        </div>
        <div id="attachment-preview-audio" style="display: flex;" >
            <span style="width: 400px; height: 300px">
                <!--To capture new audio using VideoJS-->
                <audio id="capture-audio-preview" class="video-js vjs-default-skin previewWindow"> </audio>
                <!--To play selected audio using upload button-->
                <audio id="uploaded-audio-preview" class="video-js vjs-default-skin previewWindow" controls autoplay>
                    <source id="uploaded-audio-source" src="">
                </audio>
            </span>
        </div>
    </div>

    <div id="dialog-attach-image" title="Image">
        <div id="image-selection" style="float: left;" >
            <input id="attachmentImage" type="file" name="images[]" accept="image/*" hidden>
            <button id="upload-image" value="hide" class="uploadCaptureButton" > Upload </button>
            <button id="capture-image"  value="show" class="uploadCaptureButton" > Capture </button>
        </div>
        <div id="attachment-preview-image" style="display: flex;" >
            <!--To capture new image using VideoJS-->
            <video id="capture-image-preview" class="video-js vjs-default-skin previewWindow"> </video>
            <!--To play selected image using upload button-->
            <img id="uploaded-image-preview" class="previewWindow" src="images/no-preview.jpg">
        </div>
    </div>

    <div id="dialog-attach-note" title="Notes">
        <div id="note-selection" style="float: left;" >
            <input id="attachmentNotes" type="file" name="notes[]" accept="text/plain"  hidden>
            <button id="upload-note" value="hide" class="uploadCaptureButton" > Upload </button>
            <button id="capture-note"  value="show" class="uploadCaptureButton" > New Note </button>
        </div>
        <div id="attachment-preview-note" style="display: -webkit-box;" >
            <textarea id="note-preview" class="previewWindow" title="Preview Text"> </textarea>
            <!--todo: Add rich text editor-->
        </div>
    </div>

    <div id="dialog-attach-file" title="Files">
        <div id="file-selection" style="float: left;" >
            <input id="attachmentFiles" type="file" name="files[]" accept="*/*"  hidden>
        </div>
    </div>

    <!--<div>-->
        <!--<button id="test-shapes"> Shapes </button>-->
        <!--<button id="test-selected-shape"> Selected Shape </button>-->
    <!--</div>-->


    <div class="outerContainer">
        <h2 > Change Log</h2>
        <h3> Update 9 : October 15</h3>
            <p> * Fixed fill color for shapes. </p>
            <p> * Rearranged menu buttons. </p>
            <p> * Added file upload option. </p>

        <h3> Update 8 : September 27</h3>
            <p> * Added Video, Audio, Image and Notes upload as attachment with preview </p>
            <p> * Added tooltips </p>
            <p> * Refactored code</p>

        <h3 > Update 7.1 : September 21 </h3>
            <p> * Fixed image upload from templates </p>

        <h3 > Update 7 : September 20 </h3>
            <p> * Modified size and zoom scale</p>
            <p> * Added attachments action for Video, Audio, Notes and Image buttons.</p>
            <p> * Added dialog to show selected attachments. </p>
            <p> * Attachments can be removed on click onf cross image next to the attachment name. </p>
            <p> * Added attach more files from attachments dialog. </p>
            <p> * Added preview of attached image files in the attachments dialog. </p>

        <h3 > Update 6 : September 17 </h3>
            <p> * Added Color pallet</p>
            <p> * Added user defined image upload dialog </p>
            <p> * Added preview of selected image </p>
            <p> * Added sample templates for demo purpose </p>
            <p> * Preview of user selected image from device </p>
            <p> * Fixed Zoom and Stroke-size slider </p>

        <h3 > Update 5: August 31</h3>
            <p> * Fixed slider to change pen stroke size </p>
            <p> * Added zooming with slider </p>
            <p> * Fixed template tab.
                User can upload image in Template tab now. </p>
            <p> * Capture image using web-cam and export to canvas.  </p>
            <p> * Upload user selected image to canvas. </p>
            <p> * Print / Download canvas image as PDF </p>

        <h3 > Update 4: August 13</h3>
            <p> * Added jQuery and jQuery UI </p>
            <p> * Added shapes select menu</p>
            <p> * Disable right click context menu on canvas</p>
            <p> * Added Zoom In and Out feature</p>
            <p> * Added reset zoom</p>
            <p> * Added select tool to select and move drawings.</p>

        <h3 > Update 3: July 31</h3>
            <p> * Added Text </p>
            <p> * Added Undo-Redo </p>
            <p> * Added size of pencil width change (buggy) </p>

        <h3 > Update 2: July 24</h3>
            <p> * Added Arrow, Line, Shape (Rectangle) </p>
            <p> * Added clear canvas </p>

        <h3 > Update 1: June 26</h3>
            <p> * Added Layout: css and js files </p>
            <p> * Added pencil, eraser, colors </p>
    </div>

</body>
</html>